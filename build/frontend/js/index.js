(()=>{"use strict";var t={n:e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return t.d(i,{a:i}),i},d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.jQuery;var i=t.n(e);Array.prototype.timedaysIncludes||Object.defineProperty(Array.prototype,"timedaysIncludes",{value(t){return!!this.includes(parseInt(t))||!!this.includes(t.toString())}}),function(t,e,i,n){function o(e){this.$qltgm=t(e),this.init(this)}function a(){t("div#qltgm").qltgm()}t.fn.simulateClick=function(){return this.each((function(){if("createEvent"in i){const t=this.ownerDocument,e=t.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,t.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),this.dispatchEvent(e)}else this.click()}))},o.prototype={timeDateToString(t){let e=""+t.getMinutes();return 1===e.length&&(e="0"+e),t.getHours()+":"+e},timeStringToInt:(t,e)=>parseInt(t+e),isMobile(){const t=e.matchMedia("(pointer:coarse)");return t&&t.matches},init(i){const n=this.$qltgm;if(n.on("qltgm.init",(function(){i.mobiledevice=i.isMobile()})),n.on("qltgm.time",(function(e){const n=t(e.target),o=n.data("timedays")||[],a=parseInt(n.data("timezone"))||0,l=new Date((new Date).getTime()+60*a*1e3).getUTCDay().toString();if(o&&o.length&&!o.includes(l)){n.addClass("qltgm-readonly"),n.find(".qltgm-days").show(),n.find(".qltgm-time").hide();const t=function(t,e){for(let i=t;i<=6;i++)if(e.timedaysIncludes(i))return i;for(let i=0;i<=t;i++)if(e.timedaysIncludes(i))return i}(l,o);return n.find(".day"+t).addClass("qltgm-available-day"),!0}o&&o.length&&o.includes(l)&&(n.find(".qltgm-days").hide(),n.find(".qltgm-time").show());const s=n.data("timefrom")||!1,g=n.data("timeto")||!1;if(!g||!s||s===g)return!0;const r=new Date,m=-r.getTimezoneOffset()-a,d=new Date,c=new Date;let u,f;if(u=i.timeStringToInt(s[0],s[1]),f=i.timeStringToInt(s[3],s[4]),c.setHours(u),c.setMinutes(f+m),u=i.timeStringToInt(g[0],g[1]),f=i.timeStringToInt(g[3],g[4]),d.setHours(u),d.setMinutes(f+m),r.getTime()>=c.getTime()&&r.getTime()<=d.getTime()||(n.addClass("qltgm-readonly"),n.find(".qltgm-days").hide(),n.find(".qltgm-time").show()),!a)return!0;n.find(".from").text(i.timeDateToString(c)),n.find(".to").text(i.timeDateToString(d))})),n.on("qltgm.pro",(function(){n.find(".qltgm-toggle").trigger("qltgm.time"),n.find(".qltgm-account").each((function(e,i){t(i).trigger("qltgm.time")}))})),n.on("qltgm.resize",(function(){t(this).hasClass("qltgm-show")&&t(this).trigger("qltgm.toggle")})),n.on("qltgm.init",(function(){i.mobiledevice?n.addClass("mobile").removeClass("desktop"):n.addClass("desktop").removeClass("mobile"),n.addClass("qltgm-js-ready")})),n.on("qltgm.init",(function(){n.hasClass("qltgm-premium")&&n.trigger("qltgm.pro")})),n.addClass("qltgm-js-ready").trigger("qltgm.init"),n.on("qltgm.height",(function(n){const o=t(n.delegateTarget),a=o.find(".qltgm-body"),l=o.find(".qltgm-header"),s=o.find(".qltgm-footer"),g=l.outerHeight()||0,r=s.outerHeight()||0;let m=.8*t(e).innerHeight()-g-r;i.mobiledevice||(m=.7*t(e).innerHeight()-g-r),a.css({"max-height":m+"px"})})),n.on("qltgm.toggle",(function(e){const i=t(e.delegateTarget),n=i.find(".qltgm-box");i.addClass("qltgm-transition"),n.removeClass("response texting"),setTimeout((function(){i.toggleClass("qltgm-show").trigger("qltgm.height")}),10),setTimeout((function(){i.toggleClass("qltgm-transition")}),300)})),n.on("click","[data-action=box], [data-action=close]",(function(e){e.preventDefault(),t(e.delegateTarget).trigger("qltgm.toggle")})),n.on("click","[data-action=open]",(function(){let e="tg://resolve?domain=";i.mobiledevice||(e="https://t.me/");let n=t(this).data("username")||"";n=n.replace("@",""),t(this).attr("href",e+n)})),n.on("click","[data-action=previous]",(function(e){e.preventDefault();const i=t(e.delegateTarget).find(".qltgm-box");i.addClass("closing"),setTimeout((function(){i.removeClass("response").removeClass("closing"),i.removeClass("texting")}),300)})),n.on("click","[data-action=chat]",(function(e){e.preventDefault();const i=t(this),n=t(e.delegateTarget),o=n.find(".qltgm-box"),a=i.find(".qltgm-avatar img").attr("src"),l=i.find(".qltgm-name").text(),s=i.find(".qltgm-label").text(),g=i.find(".qltgm-time").text();o.addClass("response").addClass("opening"),n.trigger("qltgm.height"),setTimeout((function(){o.removeClass("opening")}),300);const r=o.find(".qltgm-header"),m=r.find(".qltgm-avatar img"),d=r.find(".qltgm-name"),c=r.find(".qltgm-label"),u=g?g+" - "+s:s;m.attr("src",a),m.attr("alt",l),d.html(l),c.html(u)})),n.on("click","textarea",(function(){n.off("qltgm.resize")})),n.on("keypress","textarea",(function(t){13===t.keyCode&&setTimeout((function(){n.find(".qltgm-reply").simulateClick("click")}),100)})),n.on("keyup","[data-action=response]",(function(e){e.preventDefault();const i=t(this).find("textarea"),n=t(this).find("pre"),o=t(this).find(".qltgm-reply"),a=t(e.delegateTarget).find(".qltgm-box"),l=a.find(".qltgm-buttons");n.html(i.val()),setTimeout((function(){a.addClass("texting").css({"padding-bottom":n.outerHeight()}),l.addClass("active");const t=i.val();o.data("message",t),""===t&&(a.removeClass("texting"),l.removeClass("active"))}),300)})),n.hasClass("auto-load")&&t.cookie&&!t.cookie("qltgm-auto-load")){const e=n.data("autoloadelay");setTimeout((()=>{n.trigger("qltgm.toggle")}),e),t.cookie("qltgm-auto-load","auto open cookie",{expires:1})}}},t.fn.qltgm=function(e){const i=arguments;if(e===n||"object"==typeof e)return this.each((function(){t.data(this,"plugin_qltgm")||t.data(this,"plugin_qltgm",new o(this,e))}));if("string"==typeof e&&"_"!==e[0]&&"init"!==e){let a;return this.each((function(){const n=t.data(this,"plugin_qltgm");n instanceof o&&"function"==typeof n[e]&&(a=n[e].apply(n,Array.prototype.slice.call(i,1))),"destroy"===e&&t.data(this,"plugin_qltgm",null)})),a!==n?a:this}},a(),t(e).on("load",(function(){a()})),t(e).on("click",(function(e){t(e.target).closest("#qltgm.qltgm-show").length||t("div#qltgm.qltgm-show").trigger("qltgm.toggle")})),t(e).on("resize",(function(){t("div#qltgm").trigger("qltgm.resize"),t("div#qltgm").trigger("qltgm.init")}))}(i(),window,document)})();